import{u as N,d as F,j as e,n as D,a as M,b as u,r as l,o as x,q as j,O as P}from"./index-7c40f22d.js";import{b as p,c as v,d as T,e as Y,F as E,a as A}from"./index-42ecab61.js";import{M as R}from"./SpotCard-e9cc35a1.js";function $({spotId:i,setSpotChecker:n}){const o=N(),{closeModal:t}=F(),r=c=>{c.preventDefault(),c.stopPropagation(),o(D(i)).then(()=>{n(!0)}).then(t)};return e.jsxs("div",{className:"confirm-delete-container",children:[e.jsx("h1",{children:"Confirm Delete"}),e.jsx("span",{children:"Are you sure you want to remove this spot from the listings?"}),e.jsxs("div",{className:"delete-buttons-container",children:[e.jsx("button",{className:"yes-button-modal",onClick:c=>r(c),children:"Yes (Delete Spot)"}),e.jsx("button",{className:"no-button-modal",onClick:t,children:"No (Keep Spot)"})]})]})}function H(){const i=N(),n=M(),o=u(s=>s.session.user),t=u(s=>s.spots.mySpots)||[],[r,c]=l.useState(!0),[d,h]=l.useState(null);l.useEffect(()=>{if(!o){n("/");return}(async()=>{try{h(null),await i(x())}catch(a){h("Failed to load your spots"),console.error("Error fetching spots:",a)}finally{c(!1)}})()},[i,o,n]);const m=l.useCallback(()=>{n("/spots/new")},[n]),g=l.useCallback((s,a)=>{s.preventDefault(),s.stopPropagation(),n(`/spots/${a}/edit`)},[n]),b=l.useCallback(s=>{s.preventDefault(),s.stopPropagation()},[]),f=l.useCallback((s,a)=>{s.preventDefault(),s.stopPropagation(),n(`/spots/${a}`)},[n]),y=l.useCallback(async()=>{try{await i(x())}catch(s){console.error("Error refreshing spots:",s)}},[i]),C=t.length,k=t.length>0?(t.reduce((s,a)=>s+(a.avgRating||0),0)/t.length).toFixed(1):"0.0",w=t.reduce((s,a)=>s+(a.numReviews||0),0),S=t.length>0?Math.round(t.reduce((s,a)=>s+(a.price||0),0)/t.length):0;return r?e.jsx("div",{className:"manage-spots-container",children:e.jsxs("div",{className:"loading-state",children:[e.jsx("div",{className:"spinner-large"}),e.jsx("p",{children:"Loading your spots..."})]})}):d?e.jsx("div",{className:"manage-spots-container",children:e.jsxs("div",{className:"error-state",children:[e.jsxs("h2",{children:["âš  ",d]}),e.jsx("button",{onClick:()=>window.location.reload(),className:"retry-button",children:"Try Again"})]})}):e.jsx("div",{className:"manage-spots-container",children:t.length>0?e.jsxs(e.Fragment,{children:[e.jsxs("header",{className:"manage-spots-header",children:[e.jsxs("div",{className:"header-content",children:[e.jsx("h1",{children:"Manage Your Spots"}),e.jsxs("p",{className:"header-subtitle",children:["Welcome back, ",o.firstName,"! Here's your hosting overview."]})]}),e.jsxs("button",{onClick:m,className:"create-button",children:[e.jsx(p,{}),"Create New Spot"]})]}),e.jsxs("div",{className:"stats-dashboard",children:[e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:"#e3f2fd"},children:e.jsx(v,{style:{color:"#1976d2"}})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:C}),e.jsx("div",{className:"stat-label",children:"Total Listings"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:"#fff3e0"},children:e.jsx(T,{style:{color:"#FF7F50"}})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:k}),e.jsx("div",{className:"stat-label",children:"Average Rating"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:"#f3e5f5"},children:e.jsx(j,{style:{color:"#9c27b0"}})}),e.jsxs("div",{className:"stat-content",children:[e.jsx("div",{className:"stat-value",children:w}),e.jsx("div",{className:"stat-label",children:"Total Reviews"})]})]}),e.jsxs("div",{className:"stat-card",children:[e.jsx("div",{className:"stat-icon",style:{backgroundColor:"#e8f5e9"},children:e.jsx(Y,{style:{color:"#388e3c"}})}),e.jsxs("div",{className:"stat-content",children:[e.jsxs("div",{className:"stat-value",children:["$",S]}),e.jsx("div",{className:"stat-label",children:"Avg Price/Night"})]})]})]}),e.jsxs("div",{className:"quick-actions",children:[e.jsx("h3",{children:"Quick Actions"}),e.jsxs("div",{className:"action-buttons",children:[e.jsxs("button",{className:"action-btn",onClick:()=>alert("Feature coming soon! You will be able to view your calendar."),children:[e.jsx(j,{}),"View Calendar"]}),e.jsxs("button",{className:"action-btn",onClick:()=>alert("Feature coming soon! You will be able to view insights and analytics."),children:[e.jsx(v,{}),"View Insights"]}),e.jsx("button",{className:"action-btn",onClick:()=>alert("Feature coming soon! You will be able to manage your bookings."),children:"ðŸ“… Manage Bookings"})]})]}),e.jsxs("section",{className:"listings-section",children:[e.jsx("h2",{children:"Your Listings"}),e.jsx("div",{className:"spots-grid",children:t.map(s=>e.jsxs("article",{className:"spot-card-wrapper",onClick:a=>f(a,s.id),children:[e.jsx(R,{spot:s}),e.jsxs("div",{className:"spot-actions",children:[e.jsxs("button",{onClick:a=>g(a,s.id),className:"action-button update-button","aria-label":`Update ${s.name}`,children:[e.jsx(E,{}),"Update"]}),e.jsxs("button",{onClick:b,className:"action-button delete-button","aria-label":`Delete ${s.name}`,children:[e.jsx(A,{}),e.jsx(P,{itemText:"Delete",modalComponent:e.jsx($,{spotId:s.id,spotName:s.name,onDelete:y})})]})]})]},s.id))})]})]}):e.jsx("div",{className:"empty-state-wrapper",children:e.jsxs("div",{className:"empty-state",children:[e.jsx("div",{className:"empty-state-icon",children:"ðŸ–ï¸"}),e.jsx("h1",{children:"Start Your Hosting Journey"}),e.jsx("p",{className:"empty-state-description",children:"Share your beach paradise with travelers around the world and start earning income today."}),e.jsxs("div",{className:"benefits-list",children:[e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ðŸ’°"}),e.jsxs("div",{className:"benefit-text",children:[e.jsx("h3",{children:"Earn Extra Income"}),e.jsx("p",{children:"Set your own prices and availability"})]})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ðŸŒ"}),e.jsxs("div",{className:"benefit-text",children:[e.jsx("h3",{children:"Meet Travelers"}),e.jsx("p",{children:"Connect with guests from around the world"})]})]}),e.jsxs("div",{className:"benefit-item",children:[e.jsx("div",{className:"benefit-icon",children:"ðŸ›¡ï¸"}),e.jsxs("div",{className:"benefit-text",children:[e.jsx("h3",{children:"You're Protected"}),e.jsx("p",{children:"Beach Breakaway provides host guarantee coverage"})]})]})]}),e.jsxs("button",{onClick:m,className:"create-button-large",children:[e.jsx(p,{}),"Create Your First Spot"]}),e.jsxs("div",{className:"help-section",children:[e.jsx("p",{children:"Need help getting started?"}),e.jsx("button",{className:"help-link",onClick:()=>alert("Feature coming soon! Access hosting guides and resources."),children:"View Hosting Guide"})]})]})})})}export{H as default};

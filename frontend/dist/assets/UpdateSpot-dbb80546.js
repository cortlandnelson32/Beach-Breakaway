import{r,u as X,a as B,h as H,b as J,l as K,j as e,s as Q,m as V}from"./index-7c40f22d.js";import{a as x}from"./index-42ecab61.js";function _(){const[y,R]=r.useState(),[f,A]=r.useState(),[b,D]=r.useState(),[S,E]=r.useState(),[w,q]=r.useState(),[v,z]=r.useState(0),[C,T]=r.useState(),[s,O]=r.useState({}),[c,I]=r.useState(),[l,k]=r.useState(),[o,P]=r.useState(),[p,W]=r.useState(),[d,U]=r.useState(),[n,$]=r.useState(!1),[F,L]=r.useState(!0),N=X(),G=B(),{spotId:m}=H(),i=J(t=>t.spots.spot);r.useEffect(()=>{var t,u,a,j,h;!i||i.id!==parseInt(m)?N(K(parseInt(m))).then(()=>L(!1)):(R(i.address||""),A(i.city||""),D(i.state||""),E(i.country||""),q(i.description||""),z(i.price||0),T(i.name||""),L(!1),I(((t=i.SpotImages[0])==null?void 0:t.url)||""),k(((u=i.SpotImages[1])==null?void 0:u.url)||""),P(((a=i.SpotImages[2])==null?void 0:a.url)||""),W(((j=i.SpotImages[3])==null?void 0:j.url)||""),U(((h=i.SpotImages[4])==null?void 0:h.url)||""))},[N,i,m]);const M=async t=>{t.preventDefault();const u={spotId:parseInt(m),address:y,city:f,state:b,country:S,lat:37.7645358,lng:37.7645358,name:C,description:w,price:v},a={};if(S.length===0&&(a.country="Country is required"),y.length===0&&(a.address="Street Address is required"),f.length===0&&(a.city="City is required"),b.length===0&&(a.state="State is required"),w.length<30&&(a.description="Description needs a minimum of 30 characters"),C.length===0&&(a.name="Name is required"),v||(a.price="Price is required"),v<=0&&(a.price="Price must be greater than 0"),c.length===0&&(a.previewPicture="Preview image URL is required"),c.length>0&&!c.endsWith(".png")&&!c.endsWith(".jpg")&&!c.endsWith(".jpeg")&&!c.endsWith(".webp")&&(a.previewPicture="Image URL must end in .png, .jpg, or .jpeg"),l.length>0&&!l.endsWith(".png")&&!l.endsWith(".jpg")&&!l.endsWith(".jpeg")&&!l.endsWith(".webp")&&(a.picture1="Image URL must end in .png, .jpg, or .jpeg"),o.length>0&&!o.endsWith(".png")&&!o.endsWith(".jpg")&&!o.endsWith(".jpeg")&&!o.endsWith(".webp")&&(a.picture2="Image URL must end in .png, .jpg, or .jpeg"),p.length>0&&!p.endsWith(".png")&&!p.endsWith(".jpg")&&!p.endsWith(".jpeg")&&!p.endsWith(".webp")&&(a.picture3="Image URL must end in .png, .jpg, or .jpeg"),d.length>0&&!d.endsWith(".png")&&!d.endsWith(".jpg")&&!d.endsWith(".jpeg")&&!d.endsWith(".webp")&&(a.picture4="Image URL must end in .png, .jpg, or .jpeg"),Object.keys(a).length>0){O(a),$(!0);return}N(Q(u));const j=[{url:c,preview:!0},{url:l,preview:!1},{url:o,preview:!1},{url:p,preview:!1},{url:d,preview:!1}];for(const h of j)h.url!==""&&N(V(h,j.indexOf(h)+1));L(!1),G(`/spots/${m}`)};if(F)return e.jsx("div",{className:"loading-spot",children:e.jsx("img",{src:"https://media.tenor.com/On7kvXhzml4AAAAj/loading-gif.gif",alt:"loading animation",style:{height:"40px",width:"40px"}})});const g=(t,u)=>{switch(t.preventDefault(),t.stopPropagation(),u){case 1:I("");break;case 2:k("");break;case 3:P("");break;case 4:W("");break;case 5:U("");break}};return e.jsx("div",{className:"create-spot-container",children:e.jsxs("form",{className:"create-spot-form",children:[e.jsxs("div",{className:"top",children:[e.jsx("h1",{children:"Update your Spot"}),e.jsx("h2",{children:"Where's your place located?"}),e.jsx("span",{children:"Guests will only get your exact address once they booked a reservation."})]}),e.jsx("div",{className:"bottom",children:e.jsxs("div",{className:"create-spot-left-panel",children:[e.jsxs("div",{className:"create-spot-section",children:[e.jsxs("label",{id:"create-spot-label",children:["Country",n&&s.country&&e.jsx("p",{className:"error",children:s.country})]}),e.jsx("input",{className:"create-spot-input",type:"text",name:"country",value:S,onChange:t=>E(t.target.value),placeholder:"Country"})]}),e.jsxs("div",{className:"create-spot-section",children:[e.jsxs("label",{id:"create-spot-label",children:["Street Address",n&&s.address&&e.jsx("p",{className:"error",children:s.address})]}),e.jsx("input",{className:"create-spot-input",type:"text",name:"streetAddress",value:y,onChange:t=>R(t.target.value),placeholder:"Street Address"})]}),e.jsxs("div",{className:"city-state",children:[e.jsxs("div",{className:"city-container",children:[e.jsxs("label",{id:"create-spot-label",children:["City",n&&s.city&&e.jsx("p",{className:"error",children:s.city})]}),e.jsx("input",{className:"create-spot-input",type:"text",name:"city",value:f,onChange:t=>A(t.target.value),placeholder:"City"})]}),e.jsx("div",{className:"comma",children:", "}),e.jsxs("div",{children:[e.jsxs("label",{className:"state",id:"create-spot-label",children:["State",n&&s.state&&e.jsx("p",{className:"error",children:s.state})]}),e.jsx("input",{className:"create-spot-input",type:"text",name:"state",value:b,onChange:t=>D(t.target.value),placeholder:"STATE"})]})]})]})}),e.jsx("div",{className:"divider-horizontal"}),e.jsxs("div",{id:"description-container",className:"top",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Describe your place to guests"}),e.jsx("span",{children:"Mention the best features of your space, any special amenities like fast wifi or parking, and what you love about the neighborhood."})]}),e.jsx("textarea",{className:"create-spot-textarea",type:"textarea",name:"description",value:w,onChange:t=>q(t.target.value),placeholder:"Please write at least 30 characters"}),n&&s.description&&e.jsx("p",{className:"error",children:s.description})]}),e.jsx("div",{className:"divider-horizontal"}),e.jsxs("div",{id:"name-container",className:"top",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Create a title for your spot"}),e.jsx("span",{children:"Catch guests' attention with a spot title that highlights what makes your place special."})]}),e.jsx("input",{className:"create-spot-input",type:"text",name:"name",value:C,placeholder:"Name of your spot",onChange:t=>T(t.target.value)}),n&&s.name&&e.jsx("p",{className:"error",children:s.name})]}),e.jsx("div",{className:"divider-horizontal"}),e.jsxs("div",{id:"price-container",className:"top",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Set a base price for your spot"}),e.jsx("span",{children:"Competitive pricing can help your listing stand out and rank higher in search results."})]}),e.jsxs("div",{className:"price-area",children:[e.jsx("label",{className:"money-sign",children:"$"}),e.jsx("input",{className:"create-spot-input",type:"number",name:"price",value:v,placeholder:"Price per night (USD)",onChange:t=>z(t.target.value)})]}),n&&s.price&&e.jsx("p",{className:"error",children:s.price})]}),e.jsx("div",{className:"divider-horizontal"}),e.jsxs("div",{id:"spot-images-container",className:"top",children:[e.jsxs("div",{children:[e.jsx("h2",{children:"Liven up your spot with photos"}),e.jsx("span",{children:"Submit a link to at least one photo to publish your spot."})]}),e.jsxs("div",{className:"spot-images-area",children:[e.jsxs("div",{className:"spotImage-layout",children:[e.jsx("input",{className:"create-spot-input",type:"text",name:"previewPicture",value:c,placeholder:"Preview Image URL",onChange:t=>I(t.target.value)}),e.jsx("button",{className:"delete-spot-image",disabled:c.length===0,onClick:t=>g(t,1),children:e.jsx(x,{})})]}),n&&s.previewPicture&&e.jsx("p",{className:"error",children:s.previewPicture}),e.jsxs("div",{className:"spotImage-layout",children:[e.jsx("input",{className:"create-spot-input",type:"text",name:"picture1",value:l,placeholder:"Image URL",onChange:t=>k(t.target.value)}),e.jsx("button",{className:"delete-spot-image",disabled:l.length===0,onClick:t=>g(t,2),children:e.jsx(x,{})})]}),n&&s.picture1&&e.jsx("p",{className:"error",children:s.picture1}),e.jsxs("div",{className:"spotImage-layout",children:[e.jsx("input",{className:"create-spot-input",type:"text",name:"picture2",value:o,placeholder:"Image URL",onChange:t=>P(t.target.value)}),e.jsx("button",{className:"delete-spot-image",disabled:o.length===0,onClick:t=>g(t,3),children:e.jsx(x,{})})]}),n&&s.picture2&&e.jsx("p",{className:"error",children:s.picture2}),e.jsxs("div",{className:"spotImage-layout",children:[e.jsx("input",{className:"create-spot-input",type:"text",name:"picture3",value:p,placeholder:"Image URL",onChange:t=>W(t.target.value)}),e.jsx("button",{className:"delete-spot-image",disabled:p.length===0,onClick:t=>g(t,4),children:e.jsx(x,{})})]}),n&&s.picture3&&e.jsx("p",{className:"error",children:s.picture3}),e.jsxs("div",{className:"spotImage-layout",children:[e.jsx("input",{className:"create-spot-input",type:"text",name:"picture4",value:d,placeholder:"Image URL",onChange:t=>U(t.target.value)}),e.jsx("button",{className:"delete-spot-image",disabled:d.length===0,onClick:t=>g(t,5),children:e.jsx(x,{})})]}),n&&s.picture4&&e.jsx("p",{className:"error",children:s.picture4})]})]}),e.jsx("div",{className:"divider-horizontal"}),e.jsx("div",{className:"button-container",children:e.jsx("button",{className:"create-spot-button",type:"submit",onClick:t=>M(t),children:"Update Spot"})})]})})}export{_ as default};

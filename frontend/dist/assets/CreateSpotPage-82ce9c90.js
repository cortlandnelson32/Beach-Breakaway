import{r as p,a as E,u as P,j as e,k as F,m as k}from"./index-7c40f22d.js";function q(){const[r,N]=p.useState({address:"",city:"",state:"",country:"",description:"",price:"",name:""}),[l,y]=p.useState({previewPicture:"",picture1:"",picture2:"",picture3:"",picture4:""}),[t,m]=p.useState({}),[h,v]=p.useState(!1),[c,x]=p.useState(!1),[b,g]=p.useState({}),f=E(),j=P(),u=p.useCallback((s,n)=>{N(a=>({...a,[s]:n})),g(a=>({...a,[s]:!0}))},[]),w=p.useCallback((s,n)=>{y(a=>({...a,[s]:n})),g(a=>({...a,[s]:!0}))},[]);p.useEffect(()=>{const s={};r.country||(s.country="Country is required"),r.address||(s.address="Street address is required"),r.city||(s.city="City is required"),r.state||(s.state="State is required"),r.description.length<30&&(s.description="Description must be at least 30 characters"),r.name?r.name.length<3&&(s.name="Name must be at least 3 characters"):s.name="Name is required";const n=parseFloat(r.price);r.price?isNaN(n)||n<=0?s.price="Price must be greater than $0":n>1e4&&(s.price="Price must be less than $10,000"):s.price="Price is required",["previewPicture","picture1","picture2","picture3","picture4"].forEach(o=>{const d=l[o];d&&([".png",".jpg",".jpeg"].some(C=>d.toLowerCase().endsWith(C))||(s[o]="Image URL must end in .png, .jpg, or .jpeg"))}),l.previewPicture||(s.previewPicture="Preview image is required"),m(s)},[r,l]);const S=async s=>{if(s.preventDefault(),v(!0),Object.keys(t).length>0){const a=Object.keys(t)[0],o=document.getElementById(a);o&&o.scrollIntoView({behavior:"smooth",block:"center"});return}x(!0);const n={address:r.address.trim(),city:r.city.trim(),state:r.state.trim(),country:r.country.trim(),lat:37.7645358,lng:-122.4730327,name:r.name.trim(),description:r.description.trim(),price:parseFloat(r.price)};try{const a=await j(F(n)),o=[{url:l.previewPicture,preview:!0},{url:l.picture1,preview:!1},{url:l.picture2,preview:!1},{url:l.picture3,preview:!1},{url:l.picture4,preview:!1}];for(const d of o)d.url.trim()&&await j(k(d,a.id));f(`/spots/${a.id}`)}catch(a){console.error("Error creating spot:",a),m(o=>({...o,submit:"Failed to create spot. Please try again."})),x(!1)}},i=s=>h||b[s];return e.jsx("div",{className:"create-spot-container",children:e.jsxs("form",{className:"create-spot-form",onSubmit:S,children:[e.jsxs("header",{className:"form-header",children:[e.jsx("h1",{children:"Create a New Spot"}),e.jsx("p",{className:"form-subtitle",children:"Share your beach paradise with travelers"})]}),t.submit&&e.jsx("div",{className:"error-banner",role:"alert",children:t.submit}),e.jsxs("section",{className:"form-section",children:[e.jsx("h2",{children:"Where's your place located?"}),e.jsx("p",{className:"section-description",children:"Guests will only get your exact address once they book a reservation."}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"country",className:"input-label",children:["Country ",i("country")&&t.country&&e.jsxs("span",{className:"error-inline",children:["• ",t.country]})]}),e.jsx("input",{id:"country",type:"text",className:`form-input ${i("country")&&t.country?"input-error":""}`,value:r.country,onChange:s=>u("country",s.target.value),placeholder:"Country",disabled:c})]}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"address",className:"input-label",children:["Street Address ",i("address")&&t.address&&e.jsxs("span",{className:"error-inline",children:["• ",t.address]})]}),e.jsx("input",{id:"address",type:"text",className:`form-input ${i("address")&&t.address?"input-error":""}`,value:r.address,onChange:s=>u("address",s.target.value),placeholder:"Street Address",disabled:c})]}),e.jsxs("div",{className:"input-row",children:[e.jsxs("div",{className:"input-group flex-1",children:[e.jsxs("label",{htmlFor:"city",className:"input-label",children:["City ",i("city")&&t.city&&e.jsxs("span",{className:"error-inline",children:["• ",t.city]})]}),e.jsx("input",{id:"city",type:"text",className:`form-input ${i("city")&&t.city?"input-error":""}`,value:r.city,onChange:s=>u("city",s.target.value),placeholder:"City",disabled:c})]}),e.jsx("span",{className:"comma",children:","}),e.jsxs("div",{className:"input-group flex-1",children:[e.jsxs("label",{htmlFor:"state",className:"input-label",children:["State ",i("state")&&t.state&&e.jsxs("span",{className:"error-inline",children:["• ",t.state]})]}),e.jsx("input",{id:"state",type:"text",className:`form-input ${i("state")&&t.state?"input-error":""}`,value:r.state,onChange:s=>u("state",s.target.value),placeholder:"STATE",disabled:c})]})]})]}),e.jsx("div",{className:"divider"}),e.jsxs("section",{className:"form-section",children:[e.jsx("h2",{children:"Describe your place to guests"}),e.jsx("p",{className:"section-description",children:"Mention the best features of your space, any special amenities like fast wifi or parking, and what you love about the neighborhood."}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"description",className:"input-label",children:["Description ",i("description")&&t.description&&e.jsxs("span",{className:"error-inline",children:["• ",t.description]})]}),e.jsx("textarea",{id:"description",className:`form-textarea ${i("description")&&t.description?"input-error":""}`,value:r.description,onChange:s=>u("description",s.target.value),placeholder:"Please write at least 30 characters",disabled:c,rows:5}),e.jsxs("span",{className:"char-count",children:[r.description.length," / 30 minimum"]})]})]}),e.jsx("div",{className:"divider"}),e.jsxs("section",{className:"form-section",children:[e.jsx("h2",{children:"Create a title for your spot"}),e.jsx("p",{className:"section-description",children:"Catch guests' attention with a spot title that highlights what makes your place special."}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"name",className:"input-label",children:["Name ",i("name")&&t.name&&e.jsxs("span",{className:"error-inline",children:["• ",t.name]})]}),e.jsx("input",{id:"name",type:"text",className:`form-input ${i("name")&&t.name?"input-error":""}`,value:r.name,onChange:s=>u("name",s.target.value),placeholder:"Name of your spot",disabled:c})]})]}),e.jsx("div",{className:"divider"}),e.jsxs("section",{className:"form-section",children:[e.jsx("h2",{children:"Set a base price for your spot"}),e.jsx("p",{className:"section-description",children:"Competitive pricing can help your listing stand out and rank higher in search results."}),e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:"price",className:"input-label",children:["Price per night (USD) ",i("price")&&t.price&&e.jsxs("span",{className:"error-inline",children:["• ",t.price]})]}),e.jsxs("div",{className:"price-input-wrapper",children:[e.jsx("span",{className:"currency-symbol",children:"$"}),e.jsx("input",{id:"price",type:"number",className:`form-input price-input ${i("price")&&t.price?"input-error":""}`,value:r.price,onChange:s=>u("price",s.target.value),placeholder:"Price per night",min:"0",step:"1",disabled:c})]})]})]}),e.jsx("div",{className:"divider"}),e.jsxs("section",{className:"form-section",children:[e.jsx("h2",{children:"Liven up your spot with photos"}),e.jsx("p",{className:"section-description",children:"Submit a link to at least one photo to publish your spot."}),e.jsx("div",{className:"images-group",children:["previewPicture","picture1","picture2","picture3","picture4"].map((s,n)=>e.jsxs("div",{className:"input-group",children:[e.jsxs("label",{htmlFor:s,className:"input-label",children:[n===0?"Preview Image URL":`Image URL ${n}`,n===0&&" (Required)",i(s)&&t[s]&&e.jsxs("span",{className:"error-inline",children:["• ",t[s]]})]}),e.jsx("input",{id:s,type:"url",className:`form-input ${i(s)&&t[s]?"input-error":""}`,value:l[s],onChange:a=>w(s,a.target.value),placeholder:n===0?"Preview Image URL":"Image URL",disabled:c})]},s))})]}),e.jsx("div",{className:"divider"}),e.jsx("div",{className:"button-container",children:e.jsx("button",{type:"submit",className:"submit-button",disabled:c||h&&Object.keys(t).length>0,children:c?e.jsxs(e.Fragment,{children:[e.jsx("span",{className:"spinner"}),"Creating Spot..."]}):"Create Spot"})})]})})}export{q as default};
